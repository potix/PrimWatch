LIBS = -L/usr/lib/x86_64-linux-gnu -L/opt/local/lib -L/usr/local/lib 
INCS =  -I. -I./dns -I./bson -I/usr/include/x86_64-linux-gnu -I/opt/local/include -I/usr/local/include
CFLAGS = -O0 -pipe -Wall -std=gnu99
#PROF = -pg
DEBUG = -g3 -ggdb3
CC = gcc

ACCESSA_PRIMDNS_PROG = primwatch_primdns
ACCESSA_PRIMDNS_SRCS = accessa_main.c lookup.c bhash.c  shared_buffer.c bson_helper.c bson/bson.c bson/encoding.c bson/numbers.c logger.c dns/primdns.c address_util.c string_util.c
ACCESSA_PRIMDNS_OBJS = $(ACCESSA_PRIMDNS_SRCS:%.c=%.o)
ACCESSA_PRIMDNS_HEADERS = common_macro.h common_defile.h lookup.h bhash.h shared_buffer.h bson_helper.h bson/bson.h bson/encoding.h logger.h dns/primdns.h address_util.h string_util.h record.h
ACCESSA_PRIMDNS_CFLAGS = -DPRIMDNS -DACCESSA_DEBUG=0

$(ACCESSA_PRIMDNS_PROG): $(ACCESSA_PRIMDNS_OBJS)
	$(CC) $(CFLAGS) $(PROF) -o $@ $(ACCESSA_PRIMDNS_OBJS) $(LIBS)
.c.o: $(ACCESSA_PRIMDNS_HEADERS)
	$(CC) $(CFLAGS) $(ACCESSA_PRIMDNS_CFLAGS) $(INCS) $(DEBUG) $(PROF) -o $(patsubst %.c,%.o,$<) -c $<
clean:
	rm -rf *.o */*.o $(ACCESSA_PRIMDNS_PROG)
